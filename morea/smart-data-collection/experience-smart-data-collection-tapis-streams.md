---
title: "4. Tapis Streams"
published: true
morea_id: experience-smart-data-collection-tapis-streams
morea_type: experience
morea_summary: "How can we use the Streams API to mimick a real-world sensor network?"
morea_sort_order: 2
morea_labels:
  - 2:45pm - 3:30pm
---

# 4. Tapis Streams

<div class="alert alert-success mt-3" role="alert" markdown="1">
<i class="fa-solid fa-globe fa-xl"></i> **Overview**
<hr/>

**Questions**
  * How can we use the Streams API to mimick a real-world sensor network?

**Objectives**
  * How to use the Tapis Streams and Abaco APIs with the python tapipy library.
</div>

## Overview



We will be using this Jupyter notebook to generate a mock sensor with temperature and rainfall data. This will demonstrate how the streams API could be used for real-time climatological data. You will use the provided TACC login credentials (or your own if you have a personal TACC account) to authenticate with Tapis.

## Creating a Virtual Station Network

You will generate Project, Site, Instrument, Variable, and Measurement definitions through the API. We will be generating random temperature and rainfall data, but in a real-world scenario this data could be generated by a physical sensor station and submitted to the API when the measurement is taken either by the device itself, or by a separate system receiving data from the sensor station.

## Streams Channels

Once the mock station data is created, we will demonstrate the use of Streams Channels for generating notifications. Abaco Actors can be registered and conditionally triggered by measurements that meet specific criteria as they are created.

<div class="alert alert-info" role="alert" markdown="1">
<i class="fa-solid fa-circle-info fa-xl"></i> **Example**
<hr/>
A common use case for Channels would be to send a notification if a measurement exceeds a threshold. This can be used to monitor abnormal/extreme conditions or potentially faulty data from a sensor.
</div>

You will register an Abaco actor with a Docker container that will plot the values of an instrument and upload the plot to your Tapis storage system. Then a Streams Channel will be set up to trigger this Actor when your instrument reports a measurement exceeding a threshold.

Finally, an alternative use of Tapis Channels will be presented. You will create a channel that generates a discord message when a measurement exceeds a threshold. Below is a link to join the Discord server this webhook is set up to execute with.

<div class="alert alert-success mt-3" role="alert" markdown="1">
<i class="fa-solid fa-user-pen fa-xl"></i>  **Join the Discord Server**
<hr/>
[Server Link](https://discord.gg/mSJJPydrBw)

Messages generated will go to the "general" text channel.
</div>

In addition to the Actor and Discord webhook methods shown, Slack webhooks, Tapis Jobs, and general POST requests for third-party APIs are supported.

<div class="alert alert-success mt-3" role="alert" markdown="1">
<i class="fa-solid fa-globe fa-xl"></i> **Key Points**
<hr/>

* The Streams API provides methods for creating representations of sensor stations and measurements for storage and retrieval.
* Triggers can be used to kick off Abaco actors or other webhooks when measurements meet some criteria.

</div>


{% include next-button.html
top-label="Tapis UI ->"
bottom-label="3:30pm"
url="/morea/smart-data-collection/experience-smart-data-collection-tapis-ui.html" %}
