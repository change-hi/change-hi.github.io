<!DOCTYPE html>
<html lang="en">
<head>
  <title> Change-HI/EDU | 4. Tapis Streams </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/css/themes/spacelab/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link href="/css/fontawesome/css/fontawesome.css" rel="stylesheet">
  <link href="/css/fontawesome/css/brands.css" rel="stylesheet">
  <link href="/css/fontawesome/css/solid.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

  

  <!-- Load JQuery, then use it to attach the class 'active' to navbar item currently displayed. -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    $(window).on('load', function () {
      $('.nav-item').find('a[href="' + location.pathname + '"]').addClass('active');
    });
  </script>

</head>
<body>

<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/index.html"> Change-HI/EDU </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        
        <li class="nav-item"><a class="nav-link" href="/modules/">Modules</a></li>
        
        <li class="nav-item"><a class="nav-link" href="/outcomes/">Outcomes</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/readings/">Readings</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/experiences/">Experiences</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/assessments/">Assessments</a></li>
        
        
      </ul>
    </div>
  </div>
</div>

<!-- Internal fragment for displaying the breadcrumb bar -->
<div class="breadcrumb-background" style="padding-top: 1em; padding-bottom: .01em">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="/modules">Modules</a></li>
        <li class="breadcrumb-item"><a href="/modules/"></a></li>
        <li class="breadcrumb-item active">4. Tapis Streams</li>
      </ol>
    </nav>
  </div>
</div>


<div class="container">
  <h1 id="4-tapis-streams">4. Tapis Streams</h1>

<div class="alert alert-success mt-3" role="alert">
  <p><i class="fa-solid fa-globe fa-xl"></i> <strong>Overview</strong></p>
  <hr />

  <p><strong>Questions</strong></p>
  <ul>
    <li>How can we use the Streams API to mimick a real-world sensor network?</li>
  </ul>

  <p><strong>Objectives</strong></p>
  <ul>
    <li>How to use the Tapis Streams and Abaco APIs with the python tapipy library.</li>
  </ul>
</div>

<h2 id="overview">Overview</h2>

<p>We will be using this Jupyter notebook to generate a mock sensor with temperature and rainfall data. This will demonstrate how the streams API could be used for real-time climatological data. You will use the provided TACC login credentials (or your own if you have a personal TACC account) to authenticate with Tapis.</p>

<h2 id="creating-a-virtual-station-network">Creating a Virtual Station Network</h2>

<p>You will generate Project, Site, Instrument, Variable, and Measurement definitions through the API. We will be generating random temperature and rainfall data, but in a real-world scenario this data could be generated by a physical sensor station and submitted to the API when the measurement is taken either by the device itself, or by a separate system receiving data from the sensor station.</p>

<h2 id="streams-channels">Streams Channels</h2>

<p>Once the mock station data is created, we will demonstrate the use of Streams Channels for generating notifications. Abaco Actors can be registered and conditionally triggered by measurements that meet specific criteria as they are created.</p>

<div class="alert alert-info" role="alert">
  <p><i class="fa-solid fa-circle-info fa-xl"></i> <strong>Example</strong></p>
  <hr />

  <p>A common use case for Channels would be to send a notification if a measurement exceeds a threshold. This can be used to monitor abnormal/extreme conditions or potentially faulty data from a sensor.</p>
</div>

<p>You will register an Abaco actor with a Docker container that will plot the values of an instrument and upload the plot to your Tapis storage system. Then a Streams Channel will be set up to trigger this Actor when your instrument reports a measurement exceeding a threshold.</p>

<p>Finally, an alternative use of Tapis Channels will be presented. You will create a channel that generates a discord message when a measurement exceeds a threshold. Below is a link to join the Discord server this webhook is set up to execute with.</p>

<div class="alert alert-success mt-3" role="alert">
  <p><i class="fa-solid fa-user-pen fa-xl"></i>  <strong>Join the Discord Server</strong></p>
  <hr />

  <p><a href="https://discord.gg/mSJJPydrBw">Server Link</a></p>

  <p>Messages generated will go to the “general” text channel.</p>
</div>

<p>In addition to the Actor and Discord webhook methods shown, Slack webhooks, Tapis Jobs, and general POST requests for third-party APIs are supported.</p>

<div class="alert alert-success mt-3" role="alert">
  <p><i class="fa-solid fa-globe fa-xl"></i> <strong>Key Points</strong></p>
  <hr />

  <ul>
    <li>The Streams API provides methods for creating representations of sensor stations and measurements for storage and retrieval.</li>
    <li>Triggers can be used to kick off Abaco actors or other webhooks when measurements meet some criteria.</li>
  </ul>

</div>

<div style="text-align: right; padding-bottom: 10px">
  <hr />
  <button type="button" onclick="window.location='/morea/smart-data-collection/experience-smart-data-collection-tapis-ui.html'" class="btn btn-primary">
    <p style="font-size:16px; margin: 0">Tapis UI -&gt;</p>
    <p style="font-size:12px; margin: 0">3:30pm</p>
    </button>
</div>


</div>




<!-- Maybe find a different way?
<script src="/js/scrollIfAnchor.js"></script>
-->

<footer class="footer footer-background" style="padding-top: 1em; padding-bottom: 1em">
  <div class="container text-center">
    
    

    
    <p style="margin: 0">Powered by the <a class="footer-link" href="https://morea-framework.github.io/">Morea Framework</a> (Theme: spacelab)<br>
      Last update on: <span>2023-12-01 13:58:35 -1000</span></p>

    <p style="margin: 0">
      
      18 modules
      
      | 17 outcomes
      
      
      | 55 readings
      
      
      | 100 experiences
      
      
      | 15 assessments
      
    </p>
  </div>
</footer>


<!-- Load Bootstrap JavaScript components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
</script>


<!-- Add anchors to pages. -->
<script>anchors.add();</script>


</body>
</html>
