<!DOCTYPE html>
<html lang="en">
<head>
  <title> Change-HI/EDU | 7. Real Example Cleanup </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/css/themes/spacelab/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link href="/css/fontawesome/css/fontawesome.css" rel="stylesheet">
  <link href="/css/fontawesome/css/brands.css" rel="stylesheet">
  <link href="/css/fontawesome/css/solid.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

  

  <!-- Load JQuery, then use it to attach the class 'active' to navbar item currently displayed. -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    $(window).on('load', function () {
      $('.nav-item').find('a[href="' + location.pathname + '"]').addClass('active');
    });
  </script>

</head>
<body>

<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/index.html"> Change-HI/EDU </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        
        <li class="nav-item"><a class="nav-link" href="/modules/">Modules</a></li>
        
        <li class="nav-item"><a class="nav-link" href="/outcomes/">Outcomes</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/readings/">Readings</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/experiences/">Experiences</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/assessments/">Assessments</a></li>
        
        
      </ul>
    </div>
  </div>
</div>

<!-- Internal fragment for displaying the breadcrumb bar -->
<div class="breadcrumb-background" style="padding-top: 1em; padding-bottom: .01em">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="/modules">Modules</a></li>
        <li class="breadcrumb-item"><a href="/modules/data-wrangling-2">Data Wrangling, Part 2</a></li>
        <li class="breadcrumb-item active">7. Real Example Cleanup</li>
      </ol>
    </nav>
  </div>
</div>


<div class="container">
  <h1 id="7-real-example-cleanup">7. Real Example Cleanup</h1>

<p><a target="_blank" href="https://colab.research.google.com/github/mahdi-b/change-hi.github.io/blob/main/morea/data-wrangling-2/Notebooks/07-real-example-analysis.ipynb">
  <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab" />
</a></p>

<div class="alert alert-success mt-3" role="alert">
  <p><i class="fa-solid fa-globe fa-xl"></i> <strong>Overview</strong></p>
  <hr />

  <p><strong>Questions</strong></p>
  <ul>
    <li>How do you clean an example dataset?</li>
    <li>How do you deal with missing data?</li>
    <li>How do you fix column type mismatches?</li>
  </ul>

  <p><strong>Objectives</strong></p>
  <ul>
    <li>Clean an example dataset using both previously described concepts and some new ones.</li>
  </ul>

</div>

<h1 id="cleaning-real-data">Cleaning Real Data</h1>

<p>The previous episodes have focused on key concepts with small datasets and/or made-up data. However, these examples can only take you so far. For this reason, the remaining lessons and examples will be focused on an actual dataset from the Hawaiian Ocean Time-Series (HOT) data website (<a href="https://hahana.soest.hawaii.edu/hot/hot-dogs/">Link to HOT Data Website</a>). This website allows you to query data generated by the time series through various modules.</p>

<p>The Hawaiian Ocean Time Series has been collecting samples from station ALOHA located just North of Oahu since 1988. The map below shows the exact location where the samples we will be using originate from.</p>

<p><img src="https://www.soest.hawaii.edu/HOT_WOCE/img/map1image-rev2.png" alt="HOT Location" /></p>

<p>(Original image from: <a href="https://www.soest.hawaii.edu/HOT_WOCE/bath_HOT_Hawaii.html">https://www.soest.hawaii.edu/HOT_WOCE/bath_HOT_Hawaii.html</a>)</p>

<p>Going forward we are going to be using data from HOT between the 1st of January 2010 to the 1st of January 2020. This particular data we are going to be utilizing comes from bottle extractions between depths from 0 to 500m. The environmental variables that we will be looking at include:</p>

<table class="table">
  <thead>
    <tr>
      <th>Column name</th>
      <th>Environmental Variable</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>botid #</td>
      <td>Bottle ID</td>
    </tr>
    <tr>
      <td>date mmddyy</td>
      <td>Date</td>
    </tr>
    <tr>
      <td>press dbar</td>
      <td>Pressure</td>
    </tr>
    <tr>
      <td>temp ITS-90</td>
      <td>Temperature</td>
    </tr>
    <tr>
      <td>csal PSS-78</td>
      <td>Salinity</td>
    </tr>
    <tr>
      <td>coxy umol/kg</td>
      <td>Oxygen concentration</td>
    </tr>
    <tr>
      <td>ph</td>
      <td>pH</td>
    </tr>
    <tr>
      <td>phos umol/kg</td>
      <td>Phosphate concentration</td>
    </tr>
    <tr>
      <td>nit umol/kg</td>
      <td>Nitrate + Nitrite concentration</td>
    </tr>
    <tr>
      <td>no2 nmol/kg</td>
      <td>Nitrite concentration</td>
    </tr>
    <tr>
      <td>doc umol/kg</td>
      <td>Dissolved Organic Carbon concentration</td>
    </tr>
    <tr>
      <td>hbact # 1e5/ml</td>
      <td>Heterotrophic Bacteria concentration</td>
    </tr>
    <tr>
      <td>pbact # 1e5/ml</td>
      <td>Prochlorococcus numbers</td>
    </tr>
    <tr>
      <td>sbact # 1e5/ml</td>
      <td>Synechococcus numbers</td>
    </tr>
  </tbody>
</table>

<p>The data contains over 20000 individual samples. To analyze the data we are going to clean it up. Then, in the next episode we will analyze and visualize it. To do this, we will be using some of the tricks we have already learned while also introducing some new concepts. <strong>Note:</strong> The dataset we are using has been modified from its original format to reduce the amount of cleaning up we need to do.</p>

<h2 id="cleaning-up">Cleaning Up</h2>

<h3 id="dataframe-content-cleanup"><code class="language-plaintext highlighter-rouge">DataFrame</code> Content Cleanup</h3>

<p>During our initial clean up we will only load in the first few rows of our datasets entire <code class="language-plaintext highlighter-rouge">DataFrame</code>. This will make it easier to work with and less daunting.</p>

<div class="alert alert-secondary" role="alert">

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"./data/hot_dogs_data.csv"</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>  </div>

</div>

<p>This will show us the <code class="language-plaintext highlighter-rouge">DataFrame</code> seen below:</p>

<figure>
  
    <img src="/morea/data-wrangling-2/fig/E6_01_initial_dataframe.png" style="max-width: 60%;" alt="/Initial%20DataFrame" class="img-fluid mx-auto d-block border" />
  
  <figcaption style="text-align: center">
    <small>
      
    </small>
  </figcaption>
</figure>

<p>From this we can see a few things:</p>

<ul>
  <li>There are a lot of -9 values</li>
  <li>This is likely to denote Null values in the dataset</li>
  <li>The last column (to the right of the no2 column) doesn’t seem to contain a header or any data</li>
</ul>

<p>Both of these issues can easily be fixed using Pandas and things we’ve learned previously.</p>

<p>To start off let’s fix the first problem we saw which was the large number of -9 values in the dataset. These are especially strange for some of the columns e.g. how can there be a negative concentration of hbact i.e. heterotrophic bacteria? This is a stand-in for places where no measurement was obtained.</p>

<div class="alert alert-secondary" role="alert">
  <p><i class="fa-solid fa-user-pen fa-xl"></i>  <strong>Exercise: Treating -9 values as NaN values when loading data</strong></p>
  <hr />

  <p>To start off try fixing the read_csv() method so that all -9 values are treated as NaN values.</p>

  <details>
  <summary>Solution</summary>

  To fix this we can add the parameter <code>na_values= -9</code> to the <code>read_csv()</code> method giving us the following code bit:
  
  <pre>
  pd.read_csv("./data/hot_dogs_data.csv", nrows=5, na_values=-9)
  </pre>

Below shows how our <code>DataFrame</code> now looks:
<figure>
  
    <img src="/morea/data-wrangling-2/fig/E6_02_nan_dataframe.png" style="max-width: 60%;" alt="/Output%20DataFrame" class="img-fluid mx-auto d-block border" />
  
  <figcaption style="text-align: center">
    <small>
      
    </small>
  </figcaption>
</figure>

</details>
</div>

<p>With this, we have fixed the problematic -9 values from our initial <code class="language-plaintext highlighter-rouge">DataFrame</code>.</p>

<div class="alert alert-info" role="alert">
  <p><i class="fa-solid fa-circle-info fa-xl"></i> <strong>Temperature Column</strong></p>
  <hr />

  <p>The temperature column could technically contain -9 values. However, all temperature measurements were above 0 so this is not an issue.</p>
</div>

<p>The second problem we identified was that there was an extra column (with no header) made up of only <code class="language-plaintext highlighter-rouge">NaN</code> values. This is probably an issue with the original file and if we were to take a look at the raw .csv file we find that each row ends with a ‘,’. This causes <code class="language-plaintext highlighter-rouge">read_csv</code> to assume that there is another column with no data since it looks for a new line character (<code class="language-plaintext highlighter-rouge">\n</code>) to denote when to start a new row.</p>

<p>There are various methods to deal with this. However, we are going to use a relatively simple method that we’ve already learned. As we discussed in a previous episode pandas <code class="language-plaintext highlighter-rouge">DataFrame</code>s has a method to drop columns (or indexes) called <code class="language-plaintext highlighter-rouge">drop</code>. When provided with the correct arguments, it can drop a column based on its name. Knowing this we can chain our <code class="language-plaintext highlighter-rouge">read_csv</code> method with the drop method so that we load in the blank column and then immediately remove it.</p>

<div class="alert alert-secondary" role="alert">
  <p><i class="fa-solid fa-user-pen fa-xl"></i>  <strong>Exercise: Dropping the blank column</strong></p>
  <hr />

  <p>The final command we will be using can be seen below. However, the columns parameter is missing any entries in its list of columns to drop. You will be fixing this by adding the name of the column that is empty (hint: the name isn’t empty).</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"./data/hot_dogs_data.csv"</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=-</span><span class="mi">9</span><span class="p">).</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[])</span>
</code></pre></div>  </div>

  <p>To get the name of the column we will want to utilize a <code class="language-plaintext highlighter-rouge">DataFrame</code> attribute that we have already discussed that provides us with the list of names in the same order they occur in the <code class="language-plaintext highlighter-rouge">DataFrame</code>.</p>

  <details>
  <summary>Solution</summary>

  To get the name of the columns we can simply access the <code>columns</code>, <code>Series</code> attribute that ever <code>DataFrame</code> has. This can be done either through chaining it after our <code>read_csv</code> method or by store it in a variable and then call the method using that variable. Below we use the chain approach.

  <pre>
  pd.read_csv("./data/hot_dogs_data.csv", nrows=5, na_values=-9).columns
  </pre>

  <pre>
  Index(['botid #', ' date mmddyy', ' press dbar', ' temp ITS-90',
   ' csal PSS-78', ' coxy umol/kg', ' ph', ' phos umol/kg', ' nit umol/kg',
   ' doc umol/kg', ' hbact #*1e5/ml', ' pbact #*1e5/ml', ' sbact #*1e5/ml',
   ' no2 nmol/kg', ' '],
  dtype='object')
  </pre>

  The last entry in the <code>Series</code> is our 'blank' column i.e. `' '`. We add this as the only entry to our drop method and get the following code bit.

  <pre>
  pd.read_csv("./data/hot_dogs_data.csv", nrows=5, na_values=-9).drop(columns=[" "], axis=1)
  </pre>

</details>
</div>

<p>This then gives us the output <code class="language-plaintext highlighter-rouge">DataFrame</code> seen below:</p>
<figure>
  
    <img src="/morea/data-wrangling-2/fig/E6_03_no_blank_column.png" style="max-width: 60%;" alt="/No%20Blank%20Column%20DataFrame" class="img-fluid mx-auto d-block border" />
  
  <figcaption style="text-align: center">
    <small>
      
    </small>
  </figcaption>
</figure>

<p>We now have fixed some of the initial issues related to our dataset. It should be noted that there might still exist other issues with our dataset since we have only relied on the first few rows.</p>

<div class="alert alert-info" role="alert">
  <p><i class="fa-solid fa-circle-info fa-xl"></i> <strong>Column Names</strong></p>
  <hr />

  <p>Checking the <code class="language-plaintext highlighter-rouge">columns</code> attribute even if nothing immediately looks wrong can be good in order to spot e.g. blank spaces around column names that can lead to issues.</p>
</div>

<p>One final thing that we are going to do that is not quite “clean up” but nonetheless important is to set our index column when we load the data. The column we are going to use for this is the ‘botid #’ column. We can also remove the <code class="language-plaintext highlighter-rouge">nrows=5</code> parameter since we want to load the whole <code class="language-plaintext highlighter-rouge">DataFrame</code> starting in the next section.</p>

<div class="alert alert-secondary" role="alert">
  <p><i class="fa-solid fa-user-pen fa-xl"></i>  <strong>Exercise: Setting the index column when loading data</strong></p>
  <hr />

  <p>To set the index column we can use a parameter in <code class="language-plaintext highlighter-rouge">read_csv</code> that was mentioned in a previous episode. See if you can remember it!</p>

  <details>
  <summary>Solution</summary>

  To set the index column when we load the data we just have to add the parameter <code>index_col</code> and set it to botid #. Note: we have removed the <code>nrows=5</code> parameter in the code bit below since we no longer need it.

  <pre>
  pd.read_csv("./data/hot_dogs_data.csv", na_values=-9, index_col="botid #").drop(columns=[" "], axis=1)
  </pre>

</details>
</div>

<p>This gives us a somewhat cleaned up <code class="language-plaintext highlighter-rouge">DataFrame</code> that looks like the image below:</p>

<figure>
  
    <img src="/morea/data-wrangling-2/fig/E6_04_fixed_dataframe.png" style="max-width: 60%;" alt="/Cleaned%20up%20Dataframe" class="img-fluid mx-auto d-block border" />
  
  <figcaption style="text-align: center">
    <small>
      
    </small>
  </figcaption>
</figure>

<p>With our initial cleanup done we can now save the current version of our <code class="language-plaintext highlighter-rouge">DataFrame</code> to the <code class="language-plaintext highlighter-rouge">df</code> variable. This <code class="language-plaintext highlighter-rouge">df</code> variable will be used for the next two sections.</p>

<h2 id="dataframe-column-types"><code class="language-plaintext highlighter-rouge">DataFrame</code> Column Types</h2>

<p>Now that we have fixed the initial issues we could glean from an initial look at the data we can take a look at the types that Pandas assumed for each of our columns. To do this we can access the .dtypes attribute.</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">dtypes</span>
</code></pre></div>  </div>

  <h6 id="output">Output</h6>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> date mmddyy         int64
 time hhmmss         int64
 press dbar        float64
 temp ITS-90       float64
 csal PSS-78       float64
 coxy umol/kg      float64
 ph                float64
 phos umol/kg      float64
 nit umol/kg       float64
 doc umol/kg       float64
 hbact #*1e5/ml    float64
 pbact #*1e5/ml    float64
 sbact #*1e5/ml    float64
 no2 nmol/kg       float64
dtype: object
</code></pre></div>  </div>

</div>

<p>Most of the columns have the correct type with the exception of the ‘date mmddyy’ column that has the int64 type. Pandas has a built in type to format date and time columns and conversion of the date column to this datetime type will help us later on.</p>

<p>To change the type of a column from an int64 to a datetime type is a bit more difficult than e.g. a int64 to float64 conversion. This is because we both need to tell Pandas the type that we want it to convert the column’s data to and the format that it is in. For our data, this is MMDDYY which we can give to Pandas using <code class="language-plaintext highlighter-rouge">format='%m%d%y'</code>. This format parameter can be very complicated but is based on native Python more information can be found on the <code class="language-plaintext highlighter-rouge">to_datetime</code> method docs (<a href="https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html">Link to datetime method docs</a>).</p>

<p>The code bit below creates a new column called ‘date’ that contains the same data for each row as is found in the ‘date mmddyy’ column but instead with the datetime64 type. It will <strong>not</strong> delete the original ‘date mmddyy’ column.</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python-1">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">"collection_date"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'date mmddyy'</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s">'%m%d%y'</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="n">dtypes</span>
</code></pre></div>  </div>

  <h6 id="output-1">Output</h6>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>date mmddyy                int64
time hhmmss                int64
press dbar               float64
temp ITS-90              float64
csal PSS-78              float64
coxy umol/kg             float64
ph                       float64
phos umol/kg             float64
nit umol/kg              float64
doc umol/kg              float64
hbact #*1e5/ml           float64
pbact #*1e5/ml           float64
sbact #*1e5/ml           float64
no2 nmol/kg              float64
date              datetime64[ns]
dtype: object
</code></pre></div>  </div>

</div>

<p>We can see from the output that we have all of our previous columns with the addition of a ‘date’ column with the type datetime64. If we take a look at the new column we can see that it has a different formatting compared to the ‘date mmddyy’ column</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python-2">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">"collection_date"</span><span class="p">]</span>
</code></pre></div>  </div>

  <h6 id="output-2">Output</h6>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>botid #
2190200124   2010-03-09
2190200123   2010-03-09
2190200122   2010-03-09
2190200121   2010-03-09
2190200120   2010-03-09
                ...    
3170200706   2019-12-20
3170200705   2019-12-20
3170200704   2019-12-20
3170200703   2019-12-20
3170200702   2019-12-20
Name: collection_date, Length: 21222, dtype: datetime64[ns]
</code></pre></div>  </div>

</div>

<p>Now that we’ve added this column (which contains the same data as found in ‘date mmddyy’ just in a different format) there is no need for the original date mmddyy column so we can drop it.</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python-3">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"date mmddyy"</span><span class="p">])</span>
</code></pre></div>  </div>

</div>

<h2 id="dataframe-overview"><code class="language-plaintext highlighter-rouge">DataFrame</code> Overview</h2>

<p>A final thing we will want to do before moving on to the analysis episode is to get an overview of our <code class="language-plaintext highlighter-rouge">DataFrame</code> as a final way of checking to see if anything is wrong. To do this we can use the <code class="language-plaintext highlighter-rouge">describe()</code> method which we discussed earlier.</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python-4">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div>  </div>

  <h6 id="output-3">Output</h6>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         time hhmmss    press dbar   temp ITS-90   csal PSS-78  coxy umol/kg  \
count   21222.000000  21222.000000  21222.000000  21210.000000   3727.000000   
mean   103238.977523    119.381105     21.570407     35.020524    198.222297   
std     68253.013809    120.193833      4.961006      0.382516     27.787824   
min         3.000000      0.800000      6.055800     34.018800     30.900000   
25%     40625.000000     25.500000     20.625800     34.922500    199.350000   
50%    101309.000000     89.700000     23.109450     35.138700    207.200000   
75%    154822.000000    150.900000     24.742175     35.281500    212.000000   
max    235954.000000    500.000000     28.240100     35.556400    230.900000   

               ph  phos umol/kg  nit umol/kg  doc umol/kg  hbact #*1e5/ml  \
count  885.000000   2259.000000  2253.000000   868.000000      750.000000   
mean     7.956939      0.448331     5.505113    63.688341        3.933479   
std      0.158210      0.638772     9.159562    10.287748        1.173908   
min      7.366000      0.000000     0.000000    41.270000        1.481000   
25%      7.898000      0.070000     0.020000    55.467500        2.976250   
50%      8.035000      0.120000     0.240000    67.395000        4.042000   
75%      8.065000      0.520000     6.620000    72.282500        4.809500   
max      8.105000      2.610000    35.490000    80.460000        7.889000   

       pbact #*1e5/ml  sbact #*1e5/ml  no2 nmol/kg  
count      749.000000      750.000000          0.0  
mean         1.364606        0.010932          NaN  
std          0.938620        0.011851          NaN  
min          0.000000        0.000000          NaN  
25%          0.337000        0.000000          NaN  
50%          1.643000        0.009000          NaN  
75%          2.176000        0.016000          NaN  
max          3.555000        0.091000          NaN  
</code></pre></div>  </div>

</div>

<p>A look at the output shows us that the ‘no2 nmol/kg’ column does not contain any useable data based on its count value being 0. Since this column doesn’t contain any information of interest we can drop it to clean up our <code class="language-plaintext highlighter-rouge">DataFrame</code>.</p>

<div class="alert alert-secondary" role="alert">

  <h6 id="python-5">Python</h6>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"no2 nmol/kg"</span><span class="p">])</span>
</code></pre></div>  </div>

</div>

<p>With this done, our data is reasonably cleaned up and we have the <code class="language-plaintext highlighter-rouge">DataFrame</code> seen in the image below:</p>

<figure>
  
    <img src="/morea/data-wrangling-2/fig/E6_05_cleaned_dataframe.png" style="max-width: 60%;" alt="/Cleaned%20Dataframe" class="img-fluid mx-auto d-block border" />
  
  <figcaption style="text-align: center">
    <small>
      
    </small>
  </figcaption>
</figure>

<p>We can now move on to the analysis and visualization of the data in our <code class="language-plaintext highlighter-rouge">DataFrame</code>.</p>

<h2 id="summary">Summary</h2>

<p>With this we’ve cleaned up our initial dataset. To summarize we have:</p>

<ol>
  <li>Replaced the -9 placeholder for Null values with NaN values</li>
  <li>Fixed an issue with an extra column containing no data</li>
  <li>Added a custom row index</li>
  <li>Converted the data in ‘date mmddyy’ to a Pandas-supported datetime type</li>
  <li>Dropped two columns:
    <ul>
      <li>‘date mmddyy’ column since the new ‘date’ column contains the same data but in a better type</li>
      <li>‘no2 nmol/kg’ column since it contained no data</li>
    </ul>
  </li>
</ol>

<div class="alert alert-success mt-3" role="alert">
  <p><i class="fa-solid fa-globe fa-xl"></i> <strong>Key Points</strong></p>
  <hr />

  <ul>
    <li>Cleaning a dataset is an iterative process that can require multiple passes.</li>
    <li>Restart the kernel when cleaning a dataset to make sure that your code encompasses all the cleaning needed.</li>
  </ul>
</div>

<div style="text-align: right; padding-bottom: 10px">
  <hr />
  <button type="button" onclick="window.location='/morea/data-wrangling-2/experience-real-example-analysis.html'" class="btn btn-primary">
    <p style="font-size:16px; margin: 0">8. Real Example Analysis&gt;</p>
    <p style="font-size:12px; margin: 0">3:25pm</p>
    </button>
</div>


</div>




<!-- Maybe find a different way?
<script src="/js/scrollIfAnchor.js"></script>
-->

<footer class="footer footer-background" style="padding-top: 1em; padding-bottom: 1em">
  <div class="container text-center">
    
    

    
    <p style="margin: 0">Powered by the <a class="footer-link" href="https://morea-framework.github.io/">Morea Framework</a> (Theme: spacelab)<br>
      Last update on: <span>2023-12-01 13:58:35 -1000</span></p>

    <p style="margin: 0">
      
      18 modules
      
      | 17 outcomes
      
      
      | 55 readings
      
      
      | 100 experiences
      
      
      | 15 assessments
      
    </p>
  </div>
</footer>


<!-- Load Bootstrap JavaScript components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
</script>


<!-- Add anchors to pages. -->
<script>anchors.add();</script>


</body>
</html>
